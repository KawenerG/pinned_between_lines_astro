---
import { getCollection, type CollectionEntry } from "astro:content";
import BaseLayout from "../../layouts/BaseLayout.astro";
const reviews = await getCollection("reviews");
const grouped = new Map();
type Review = CollectionEntry<"reviews">;

for (const r of reviews) {
  const key = r.data.series || "æœªåˆ†ç±»";
  if (!grouped.has(key)) grouped.set(key, []);
  grouped.get(key).push(r);
}
---
<BaseLayout title="ä¹¦è¯„é¦–é¡µ">
<h1>ðŸ“– æ‰€æœ‰ä¹¦è¯„åˆ†ç»„å±•ç¤º</h1>

{Array.from(grouped.entries()).map(([series, items]) => (
  <section>
    <h2>{series}</h2>
    <ul>
      {items.map((r:Review) => (
        <li>
          <a href={`/reviews/${r.slug}`}>{r.data.title}</a>
        </li>
      ))}
    </ul>
  </section>
))}
</BaseLayout>